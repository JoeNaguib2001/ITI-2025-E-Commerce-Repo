<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/main-colors.css">
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

    <title>Home</title>
    <style>
        .promo-text {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            box-shadow: -4px -4px 8px rgba(0, 0, 0, 0.2), 4px 4px 8px rgba(0, 0, 0, 0.2);
        }

        .promo-text h3 {
            font-size: 1.8rem;
            color: #333;
        }

        .carousel-inner img {
            height: 600px;
            object-fit: cover;
            border-radius: 10px;
        }

        .carousel-control-prev-icon,
        .carousel-control-next-icon {
            background-color: orange;
            color: black;
            border-radius: 50%;
            padding: 10px;
        }


        .product-card {
            text-align: center;
            padding: 15px;
            margin: 0 auto;
        }

        #productSlider {
            margin: auto;
        }


        .product-card img {
            height: 650px;
            object-fit: cover;
            border-radius: 10px;
            transition: transform 0.3s ease-in-out;
        }

        .product-card:hover img {
            transform: scale(1.1);
        }

        .product-info h5 {
            font-size: 18px;
            margin: 10px 0;
        }


        .carousel-item {
            transition: transform 0.5s ease;
        }



        @media (max-width:990px) {

            .sunglasses-collection {
                flex-direction: column;
                gap: 20px;
                align-items: center;
            }

            .left-side {
                order: 2;
            }

            .right-side {
                order: 1;
            }

        }

        .shop-now-btn {
            width: 300px !important;
            text-align: center;
            margin-top: 30px;
            background-color: #ff5733;
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px 20px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .shop-now-btn:hover {
            background-color: darkgreen;
            scale: 1.3;
            transition: .3s;
        }

        .navbar {
            background: transparent !important;
        }

        .nav-link {
            font-size: 1.2rem;
            font-weight: 500;
            color: black;
            /* Default color */
            transition: color 0.3s ease;
        }

        .nav-link:hover,
        .nav-link.active {
            color: #ff5733 !important;
            /* Active color */
        }

        .nav-pills .nav-link.active {
            color: #ff5733 !important;
            /* لون العنصر النشط */
            background-color: transparent !important;
            /* إزالة الخلفية */
        }

        .product-card-tall img {
            height: 800px;
            object-fit: cover;
            border-radius: 10px;
            transition: transform 0.3s ease-in-out;
            width: 80%;
        }

        body {
            background-color: black;
        }

        #carouselExample img {
            height: 800px !important;
        }

        /* @media (max-width: ) */
    </style>
</head>

<body>
    <!-- Toast -->
    <div class="container-fluid px-0">
        <!-- Toast Container -->
        <div class="toast-container position-fixed top-0 end-0 p-3">
            <div id="bootstrapToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header">
                    <strong class="me-auto" id="toastTitle">Notification</strong>
                    <small>Just now</small>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body text-dark" id="toastMessage">Message goes here.</div>
            </div>
        </div>
        <!-- End Toast Container -->
        <div class="d-flex justify-content-center align-items-center"
            style="background-image: url(./Images/design_a_background_image_for_an_ecommerce_website_but_dont_design_buttons_just_the_image_and_some__qv06hicou6ak412v6nj0_2.png);
                    background-size: cover; background-repeat: no-repeat; height: 100vh; display: flex; align-items: center; justify-content: center;">
            <nav class="navbar navbar-expand-lg position-absolute top-0 start-0 end-0" style="z-index: 100;">
                <div class="container justify-content-center">
                    <ul class="nav nav-pills d-flex gap-5">
                        <li class="nav-item">
                            <a class="nav-link active text-light" href="#home" data-bs-toggle="pill"
                                onclick="window.scrollTo({ top: 0, behavior: 'smooth' });">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-light" href="#about" data-bs-toggle="pill"
                                onclick="let summerCollection = document.querySelector('.sunglasses-collection'); summerCollection.scrollIntoView({ behavior: 'smooth', block: 'center' })">Categories</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-light" href="#products" data-bs-toggle="pill">Trending</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-light" href="#" data-bs-toggle="pill" onclick="SignIn()">Sign In</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-light" href="#contact" data-bs-toggle="pill">Contact</a>
                        </li>
                    </ul>
                </div>
            </nav>
            <div class="d-flex flex-column gap-2 align-items-center" style="width: 60%;">
                <h2 style="font-weight: 300; margin-bottom: 30px;" class="text-white">
                    50% Discounts For Limited Time
                </h2>
                <h3 style="font-weight: 200; margin-bottom: 30px;" class="text-white">
                    We Deliver All Around Egypt ! </h3>
                <h3 style="font-weight: 200;" class="text-white">
                    Free Delivery For Orders Over <span style="font-weight:400;" class="text-white">500.00 EGP</span>
                </h3>
                <span class="shop-now-btn" onclick="ShopNow()">
                    Shop Now
                </span>
            </div>
        </div>
        <!-- First Carousel with Promo Text -->
        <div class="container-fluid my-5">
            <!-- الكاروسيل الأول -->
            <div class="d-flex flex-wrap align-items-center sunglasses-collection my-5">
                <div class="col-12 col-lg-9  left-side">
                    <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-indicators first-carousel-indicators">
                        </div>
                        <div class="carousel-inner first-carousel-to-fill">
                            <!-- Loaded From Json Carousel_1.json -->
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>
                <!-- النص الدعائي بجانب الكاروسيل -->
                <div class="col-9 col-lg-3  d-flex align-items-center justify-content-center text-center right-side">
                    <div class="promo-text py-5 px-5 d-flex justify-content-center">
                        <h3 style="font-weight: 100;">New Sunglasses Collection</h3>
                    </div>
                </div>
            </div>
        </div>

        <!-- Second Carousel with 2 2:3 -->
        <div class="d-flex flex-wrap bg-black text-white my-5 sunglasses-collection"
            style="border-bottom: 3px solid white;">
            <div class="col-12 col-md-9 left-side">
                <div id="productSlider2" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-indicators second-carousel-indicators">
                    </div>
                    <div class="carousel-inner second-carousel-to-fill">
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#productSlider2"
                        data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#productSlider2"
                        data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
            <div class="d-flex justify-content-center align-items-center col-12 col-md-3 right-side">
                <h1 style="font-weight: 100;">New Collection</h1>
            </div>
        </div>
    </div>

    <!-- Third Carousel with 4 2:3 -->
    <!-- الكاروسيل الثالث (بشكل منفصل عن الأول) -->
    <div class="container-fluid">
        <div class="d-flex flex-wrap products-carousel bg-black text-white">
            <div class="d-flex justify-content-center align-items-center col-12 my-5">
                <h1 style="font-weight: 100;">New Collection</h1>
            </div>
            <div>
                <div id="productSlider" class="carousel slide " data-bs-ride="carousel">
                    <div class="carousel-indicators third-carousel-indicators">

                    </div>
                    <div class="carousel-inner third-carousel-to-fill">

                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#productSlider"
                        data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#productSlider"
                        data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Load Boostrap JS -->
    <script src="./js/utilities.js"></script>
    <script src="./js/bootstrap.bundle.min.js"></script>



    <script>
        function ShopNow() {
            if (isSignedIn()) {
                window.location.href = "./shop.html";
            } else {
                ShowBootstrapToast("Please log in to continue shopping.", "danger");
                setTimeout(() => {
                    window.location.href = "./login.html";
                }, 2000);
            }
        }

        function SignIn() {
            if (isSignedIn()) {
                window.location.href = "./shop.html";
            } else {
                window.location.href = "./login.html";
            }
        }

        function setSignInText() {
            if (isSignedIn()) {
                document.querySelectorAll('.nav-link')[3].innerText = "Sign Out";
            }
            else {
                document.querySelectorAll('.nav-link')[3].innerText = "Sign In";
            }
        }
        setSignInText();

        function loadFirstCarousel() {
            const firstCarouselToFill = document.querySelector(".first-carousel-to-fill");
            const firstCarouselIndicators = document.querySelector(".first-carousel-indicators");
            fetch('./Data/Carousel_1.json')
                .then(response => response.json())
                .then(data => {
                    data.forEach((item, index) => {
                        const carouselItem = document.createElement('div');
                        const carouselIndicator = document.createElement('button');
                        carouselIndicator.type = "button";
                        carouselIndicator.setAttribute("data-bs-target", "#carouselExample");
                        carouselIndicator.setAttribute("data-bs-slide-to", index);
                        carouselIndicator.setAttribute("aria-label", `Slide ${index + 1}`);
                        if (index === 0) {
                            carouselIndicator.className = "active";
                            carouselIndicator.setAttribute("aria-current", "true");
                        }
                        firstCarouselIndicators.appendChild(carouselIndicator);

                        let addToCartBtn = document.createElement("button");
                        addToCartBtn.innerHTML = "Add To Cart";
                        addToCartBtn.style.marginBottom = "50px";
                        addToCartBtn.style.padding = "20px";
                        addToCartBtn.className = "col-3";
                        setupAddToCartBtn(addToCartBtn, item); // هنا بتحط الـ event

                        carouselItem.className = `carousel-item${index === 0 ? ' active' : ''}`;

                        const carouselContent = document.createElement("div");
                        carouselContent.className = "d-flex flex-column gap-3 align-items-center";

                        const img = document.createElement("img");
                        img.src = item.image;
                        img.alt = item.alt;
                        img.className = "d-block w-100";

                        carouselContent.appendChild(img);
                        carouselContent.appendChild(addToCartBtn);
                        carouselItem.appendChild(carouselContent);

                        firstCarouselToFill.appendChild(carouselItem);
                    });
                })
                .catch(error => console.error('Error fetching carousel data:', error));
        }

        loadFirstCarousel();

        function loadSecondCarousel() {
            const secondCarouselToFill = document.querySelector(".second-carousel-to-fill");
            const secondCarouselIndicators = document.querySelector(".second-carousel-indicators");
            fetch('./Data/Carousel_2.json').then(response => response.json()).then(data => {
                for (let i = 0; i < data.length; i += 2) {
                    const carouselItem = document.createElement('div');
                    const carouselIndicator = document.createElement('button');
                    carouselIndicator.type = "button";
                    carouselIndicator.setAttribute("data-bs-target", "#productSlider");
                    carouselIndicator.setAttribute("data-bs-slide-to", i / 2);
                    carouselIndicator.setAttribute("aria-label", `Slide ${i / 2 + 1}`);
                    if (i === 0) {
                        carouselIndicator.className = "active";
                        carouselIndicator.setAttribute("aria-current", "true");
                    }
                    secondCarouselIndicators.appendChild(carouselIndicator);
                    carouselItem.className = `carousel-item${i === 0 ? ' active' : ''}`;
                    carouselItem.innerHTML = `
                <div class="d-flex flex-wrap">
                    <div class="col-lg-6 col-12 d-flex justify-content-center">
                    <div class="product-card">
                        <img src="${data[i].image}" alt="${data[i].alt}">
                        <div class="product-info">
                        <h5>${data[i].productName}</h5>
                        <p>${data[i].price}</p>
                        </div>
                    </div>
                    </div>
                    ${i + 1 < data.length ? `
                    <div class="col-lg-6 col-12 d-flex justify-content-center">
                    <div class="product-card">
                        <img src="${data[i + 1].image}" alt="${data[i + 1].alt}">
                        <div class="product-info">
                        <h5>${data[i + 1].productName}</h5>
                        <p>${data[i + 1].price}</p>
                        </div>
                    </div>
                    </div>` : ''}
                </div>`;
                    secondCarouselToFill.appendChild(carouselItem);
                }
            }).catch(error => console.error('Error fetching carousel data:', error));
        }
        loadSecondCarousel();


        function loadThirdCarousel() {
            const thirdCarouselToFill = document.querySelector(".third-carousel-to-fill");
            const thirdCarouselIndicators = document.querySelector(".third-carousel-indicators");
            fetch('./Data/Carousel_3.json')
                .then(response => response.json())
                .then(data => {
                    for (let i = 0; i < data.length; i += 4) {
                        const carouselItem = document.createElement('div');
                        const carouselIndicator = document.createElement('button');
                        carouselIndicator.type = "button";
                        carouselIndicator.setAttribute("data-bs-target", "#productSlider");
                        carouselIndicator.setAttribute("data-bs-slide-to", i / 4);
                        carouselIndicator.setAttribute("aria-label", `Slide ${i / 4 + 1}`);
                        if (i === 0) {
                            carouselIndicator.className = "active";
                            carouselIndicator.setAttribute("aria-current", "true");
                        }
                        thirdCarouselIndicators.appendChild(carouselIndicator);

                        carouselItem.className = `carousel-item${i === 0 ? ' active' : ''}`;
                        carouselItem.innerHTML = `
                            <div class="d-flex flex-wrap">
                                ${data.slice(i, i + 4).map(item => `
                                    <div class="col-lg-3 col-md-6 col-12 d-flex justify-content-center">
                                        <div class="product-card-tall d-flex flex-column align-items-center gap-3">
                                            <img src="${item.image}" alt="${item.alt}">
                                            <div class="product-info">
                                                <h5>${item.productName}</h5>
                                                <p>${item.price}</p>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>`;
                        thirdCarouselToFill.appendChild(carouselItem);
                    }
                })
                .catch(error => console.error('Error fetching carousel data:', error));
        }

        loadThirdCarousel();

        function setupAddToCartBtn(btn, product) {
            btn.addEventListener("click", () => {
                if (isSignedIn()) {
                    addToCart(product);
                    ShowBootstrapToast("Added to cart", "success");
                } else {
                    ShowBootstrapToast("Please log in to continue shopping.", "danger");
                    setTimeout(() => {
                        window.location.href = "./login.html";
                    }, 2000);
                }
            });
        }
        function addToCart(product) {
            if (localStorage.getItem("isSignedIn") !== "true") {
                alert("يجب تسجيل الدخول أولاً لإضافة المنتج إلى السلة.");
                return;
            }

            let username = localStorage.getItem("username"); // Assuming the username is stored in localStorage
            if (!username) {
                alert("User not found. Please log in again.");
                return;
            }

            let carts = JSON.parse(localStorage.getItem("carts")) || [];
            let userCart = carts.find(cart => cart.username === username);

            if (!userCart) {
                userCart = { username: username, order: [] };
                carts.push(userCart);
            }

            let existingProduct = userCart.order.find(item => item.id === product.id);
            if (existingProduct) {
                existingProduct.quantity += 1;
            } else {
                userCart.order.push({ ...product, quantity: 1 });
            }

            localStorage.setItem("carts", JSON.stringify(carts));
        }
    </script>


</body>

</html>